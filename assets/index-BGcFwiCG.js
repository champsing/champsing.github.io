import{d as X,E as D,r as I,G as M,H as U,I as r,J as o,K as a,L as A,M as d,F as G,N as ae,c as w,O as L,P as re,Q as se,R as H,S as oe,U as ne}from"./@vue-BDNq4Tdq.js";import"./d3-transition-Bm5e6Jw0.js";import"./d3-zoom-Dx5EVu_o.js";import{C as ie,p as de,a as ue,b as ce,B as fe,L as pe,P as me,c as he,d as ve,e as _e,T as ge}from"./chart.js-StUQ_sSS.js";import{b as ye}from"./d3-scale-kiidEho7.js";import{N as J,a as xe,b as R,c as be,d as Fe,e as we,f as Se,g as W,h as V,i as K,j,k as Ce,l as Q}from"./naive-ui-CWEhaANO.js";import{c as Ne}from"./d3-fetch-BM4YHbnu.js";import{p as Te,a as Be}from"./d3-shape-D20SvHqO.js";import{d as z}from"./d3-selection-Bj1BqfTz.js";import{a as De}from"./d3-axis-BsMSJ-B0.js";import"./d3-dispatch-kxCwF96_.js";import"./d3-timer-DdKHrDhs.js";import"./d3-interpolate-BbFwFWjk.js";import"./d3-color-9lF95FHy.js";import"./d3-ease-DRPgKoYJ.js";import"./@kurkle-BZxJdD1U.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-OtVwhkKS.js";import"./vooks-g-0j76WS.js";import"./evtd-CI_DDEu_.js";import"./seemly-Br3QtYZ3.js";import"./vueuc-fcdC5Fb-.js";import"./@css-render-rA10TjLB.js";import"./vdirs-DL8EOfHr.js";import"./@juggle-C8OzoCMD.js";import"./css-render-BDrvWz3H.js";import"./@emotion-WldOFDRm.js";import"./lodash-es-CqLjCvqY.js";import"./treemate-HRdUPn5m.js";import"./date-fns-BWpi5zXa.js";import"./@babel-BouMBNZt.js";import"./date-fns-tz-BTMspiiU.js";import"./d3-dsv-DtfmIkuF.js";import"./d3-path-CimkQT29.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))m(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const C of h.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&m(C)}).observe(document,{childList:!0,subtree:!0});function f(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerPolicy&&(h.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?h.credentials="include":s.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function m(s){if(s.ep)return;s.ep=!0;const h=f(s);fetch(s.href,h)}})();const g=p=>(re("data-v-308090d9"),p=p(),se(),p),Ae={class:"filter"},Le=g(()=>r("label",{style:{"font-size":"18px"}},"起始日期:",-1)),ze=g(()=>r("label",{style:{"font-size":"18px"}},"结束日期:",-1)),Me=g(()=>r("label",{style:{"font-size":"18px"}},"完成状态:",-1)),Ee=g(()=>r("label",{style:{"font-size":"18px"}},"搜索:",-1)),Oe=g(()=>r("hr",{class:"rounded"},null,-1)),Pe={class:"main"},ke={class:"detail"},Ie=g(()=>r("thead",null,[r("tr",null,[r("td",{style:{"font-size":"18px"}},"日期"),r("td",{style:{"font-size":"18px"}},"惩罚内容"),r("td",{style:{"font-size":"18px"}},"完成状况")])],-1)),Ue=g(()=>r("div",{class:"pie"},[r("svg",{id:"pieChart",width:"100%",height:"100%",viewBox:"-1 -1 2 2"})],-1)),He=g(()=>r("div",{class:"time"},[r("svg",{id:"barChart",height:"90%"})],-1)),Re=g(()=>r("hr",{class:"rounded"},null,-1)),We=g(()=>r("br",null,null,-1)),Ve={style:{overflow:"auto"}},Ke=g(()=>r("br",null,null,-1)),je=X({__name:"HelloWorld",props:{filterBegTs:{default:16725024e5},filterBegTsModifiers:{},filterEndTs:{default:Date.now()},filterEndTsModifiers:{},filterFinish:{default:-1},filterFinishModifiers:{},filterSearch:{default:""},filterSearchModifiers:{}},emits:["update:filterBegTs","update:filterEndTs","update:filterFinish","update:filterSearch"],setup(p){ie.register(de,ue,ce,fe,pe,me,he,ve,_e,ge);var c=D(p,"filterBegTs",{set(e){return N(e,f.value,m.value,s.value),e}}),f=D(p,"filterEndTs",{set(e){return N(c.value,e,m.value,s.value),e}}),m=D(p,"filterFinish",{set(e){return N(c.value,f.value,e,s.value),e}}),s=D(p,"filterSearch",{set(e){return N(c.value,f.value,m.value,e),e}}),h=[{label:"",value:-1},{label:"未開始",value:0},{label:"已完成",value:1},{label:"勉強過",value:2},{label:"進行中",value:3}];const C="data.csv?random="+Math.floor(Math.random()*1e6).toString();var q=[],T=I([]);Ne(C,function(e){q.push(e),N(c.value,f.value,m.value,s.value)});function N(e,i,l,_){T.value=q.filter(v=>v.date>=new Date(e).toISOString().slice(0,10)&&v.date<=new Date(i).toISOString().slice(0,10)).filter(v=>l==-1||l==v.done).filter(v=>_==""||v.name.toLowerCase().includes(_.toLowerCase())).sort((v,b)=>v.date.localeCompare(b.date)),Z(T.value),$(T.value)}function Y(e){return e==0?"未开始":e==1?"已完成":e==2?"勉强过":e==3?"进行中":"undefined"}function x(e){return e==0?"#922B21":e==1?"#196F3D":e==2?"#9D9D9D":e==3?"#4DFFFF":"#000000"}function E(e){return e==0||e==1?"#FFFFFF":"#000000"}function O(e){return e.length>32?e.substring(0,30)+"...":e}function Z(e){const i=e.filter(n=>n.done==0).length,l=e.filter(n=>n.done==1).length,_=e.filter(n=>n.done==2).length,v=e.filter(n=>n.done==3).length,b=Te(),y=Be().innerRadius(0).outerRadius(.9),S=b([i,l,_,v]);z("#pieChart").selectAll("*").remove();const B=z("#pieChart");B.selectAll("arc").data(S).enter().append("g").append("path").attr("fill",(n,F)=>x(F)).attr("d",y),B.selectAll("label").data(S.filter(n=>n.data!=0)).enter().append("g").attr("transform",n=>"translate("+y.centroid(n)+")").append("text").text(n=>n.data.toString()).style("text-anchor","middle").style("font-size",.1)}function $(e){var i=Array.from(Map.groupBy(e,t=>t.date),([t,u])=>[t,u]).map(function(t){return{date:t[0],s0:t[1].filter(u=>u.done==0).length,s1:t[1].filter(u=>u.done==1).length,s2:t[1].filter(u=>u.done==2).length,s3:t[1].filter(u=>u.done==3).length}});let l=40,_=10,v=27,b=200,y=b-50,S=l*i.length,B=S/b*v,n=Math.max(...i.map(t=>t.s0+t.s1+t.s2+t.s3))/y;z("#barChart").selectAll("*").remove();const F=z("#barChart").attr("width",B+"vh").attr("viewBox","0 0 "+S+" "+b);F.selectAll("s0").data(i).enter().append("rect").attr("x",(t,u)=>u*l).attr("y",t=>y-t.s0/n).attr("width",l-_).attr("height",t=>t.s0/n).attr("fill",x(0)),F.selectAll("s1").data(i).enter().append("rect").attr("x",(t,u)=>u*l).attr("y",t=>y-(t.s0+t.s1)/n).attr("width",l-_).attr("height",t=>t.s1/n).attr("fill",x(1)),F.selectAll("s2").data(i).enter().append("rect").attr("x",(t,u)=>u*l).attr("y",t=>y-(t.s0+t.s1+t.s2)/n).attr("width",l-_).attr("height",t=>t.s2/n).attr("fill",x(2)),F.selectAll("s3").data(i).enter().append("rect").attr("x",(t,u)=>u*l).attr("y",t=>y-(t.s0+t.s1+t.s2+t.s3)/n).attr("width",l-_).attr("height",t=>t.s3/n).attr("fill",x(3));const le=ye().domain(i.map(t=>t.date)).range([0,S]).padding(.1);F.append("g").attr("transform","translate(0,"+y+")").call(De(le)).selectAll("text").style("text-anchor","end").attr("transform","rotate(-45)")}const ee=e=>{P.value=!0,k.value=e},te=e=>{window.open(e)},P=I(!1),k=I({id:"",date:"",youtube_vod:"",name:"",done:"",description:""});return(e,i)=>(M(),U(G,null,[r("div",Ae,[r("div",null,[Le,o(a(J),{type:"date",value:a(c),"onUpdate:value":i[0]||(i[0]=l=>A(c)?c.value=l:c=l)},null,8,["value"])]),r("div",null,[ze,o(a(J),{type:"date",value:a(f),"onUpdate:value":i[1]||(i[1]=l=>A(f)?f.value=l:f=l)},null,8,["value"])]),r("div",null,[Me,o(a(R),{vertical:""},{default:d(()=>[o(a(xe),{value:a(m),"onUpdate:value":i[2]||(i[2]=l=>A(m)?m.value=l:m=l),options:a(h),"consistent-menu-width":!1},null,8,["value","options"])]),_:1})]),r("div",null,[Ee,o(a(R),{vertical:""},{default:d(()=>[o(a(be),{round:"",placeholder:"輸入懲罰內容來搜尋",value:a(s),"onUpdate:value":i[3]||(i[3]=l=>A(s)?s.value=l:s=l),type:"text"},null,8,["value"])]),_:1})])]),Oe,r("div",Pe,[r("div",ke,[o(a(Fe),{bordered:!0,size:"small",style:{"text-align":"center"}},{default:d(()=>[Ie,r("tbody",null,[(M(!0),U(G,null,ae(a(T),l=>(M(),U("tr",null,[r("td",{style:H({"background-color":x(l.done),color:E(l.done)})},[o(a(Q),{onClick:_=>te(l.youtube_vod),text:!0,focusable:!1,"text-color":"#FFFFFF"},{default:d(()=>[w(L(l.date),1)]),_:2},1032,["onClick"])],4),r("td",{style:H({"background-color":x(l.done),color:E(l.done)})},[o(a(Q),{onClick:_=>ee(l),text:!0,focusable:!1,"text-color":"#FFFFFF"},{default:d(()=>[w(L(O(l.name)),1)]),_:2},1032,["onClick"])],4),r("td",{style:H({"background-color":x(l.done),color:E(l.done)})},L(Y(l.done)),5)]))),256))])]),_:1}),o(a(Se),{show:P.value,"onUpdate:show":i[4]||(i[4]=l=>P.value=l),width:502,placement:"right"},{default:d(()=>[o(a(we),{title:O(k.value.name)},{default:d(()=>[w(L(O(k.value.description)),1)]),_:1},8,["title"])]),_:1},8,["show"])]),Ue]),He,Re,o(a(R),null,{default:d(()=>[We]),_:1}),o(a(Ce),{"arrow-placement":"right",style:{"--n-title-font-size":"24px","--n-title-text-color":"rgb(11,118,225)"}},{default:d(()=>[o(a(W),{title:"懲罰語法",name:"punish_syntax"},{default:d(()=>[r("div",Ve,[o(a(V),{bordered:""},{default:d(()=>[o(a(K),null,{default:d(()=>[o(a(j),{style:{"text-align":"left","font-size":"18px"}},{default:d(()=>[w(" <日期>: Unix Timestamp"),Ke,w(" <編號>: int <懲罰主文>: string 〔詳細資料〕: additionalMetaData（執行狀態）: statusMetaData ")]),_:1})]),_:1})]),_:1})])]),_:1}),o(a(W),{title:"詳細資料",name:"more_information"},{default:d(()=>[r("div",null,[o(a(V),{bordered:""},{default:d(()=>[o(a(K),null,{default:d(()=>[o(a(j),{style:{"font-size":"18px"}},{default:d(()=>[w(" 🆙增加、🔁重抽、2️⃣備案、📝原主人修改n次、➕其他後來增加的條件 ")]),_:1})]),_:1})]),_:1})])]),_:1}),o(a(W),{title:"完成狀態",name:"punish_status"},{default:d(()=>[r("div",null,[o(a(V),{bordered:""},{default:d(()=>[o(a(K),null,{default:d(()=>[o(a(j),{style:{"font-size":"18px"}},{default:d(()=>[w(" ✅完成、✅已抽、🏁原主人或投票給過、⏲️ ⚔️目前已完成進度 ")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})],64))}}),qe=(p,c)=>{const f=p.__vccOpts||p;for(const[m,s]of c)f[m]=s;return f},Ge=qe(je,[["__scopeId","data-v-308090d9"]]),Je=X({__name:"App",setup(p){return(c,f)=>(M(),oe(Ge))}});ne(Je).mount("#app");
