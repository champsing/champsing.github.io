import{d as q,E as B,r as Y,G as D,H as E,I as l,J as n,K as a,L,M as u,F as V,N as Z,c as z,O as $,P as tt,Q as O,R as P,S as et,U as rt}from"./@vue-Bk7EOsdx.js";import"./d3-transition-Bm5e6Jw0.js";import"./d3-zoom-Dx5EVu_o.js";import{C as lt,p as at,a as st,b as ot,B as nt,L as it,P as dt,c as ut,d as ct,e as ft,T as pt}from"./chart.js-StUQ_sSS.js";import{b as mt}from"./d3-scale-kiidEho7.js";import{N as K,a as ht,b as I,c as vt,d as gt,e as H,f as U,g as R,h as W,i as _t}from"./naive-ui-CGm1_76i.js";import{c as yt}from"./d3-fetch-BM4YHbnu.js";import{p as xt,a as bt}from"./d3-shape-D20SvHqO.js";import{d as A}from"./d3-selection-Bj1BqfTz.js";import{a as St}from"./d3-axis-BsMSJ-B0.js";import"./d3-dispatch-kxCwF96_.js";import"./d3-timer-DdKHrDhs.js";import"./d3-interpolate-BbFwFWjk.js";import"./d3-color-9lF95FHy.js";import"./d3-ease-DRPgKoYJ.js";import"./@kurkle-BZxJdD1U.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-OtVwhkKS.js";import"./vooks-0aW4eFJj.js";import"./evtd-CI_DDEu_.js";import"./seemly-Br3QtYZ3.js";import"./vueuc-BsHmAXaV.js";import"./@css-render-BGjy6LAq.js";import"./vdirs-DL8EOfHr.js";import"./@juggle-C8OzoCMD.js";import"./css-render-BDrvWz3H.js";import"./@emotion-WldOFDRm.js";import"./lodash-es-CqLjCvqY.js";import"./treemate-HRdUPn5m.js";import"./date-fns-BWpi5zXa.js";import"./@babel-BouMBNZt.js";import"./date-fns-tz-BTMspiiU.js";import"./d3-dsv-DtfmIkuF.js";import"./d3-path-CimkQT29.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))m(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const F of h.addedNodes)F.tagName==="LINK"&&F.rel==="modulepreload"&&m(F)}).observe(document,{childList:!0,subtree:!0});function f(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerPolicy&&(h.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?h.credentials="include":s.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function m(s){if(s.ep)return;s.ep=!0;const h=f(s);fetch(s.href,h)}})();const g=p=>($("data-v-f3bdd3d1"),p=p(),tt(),p),wt={class:"filter"},Ft=g(()=>l("label",{style:{"font-size":"18px"}},"起始日期:",-1)),Ct=g(()=>l("label",{style:{"font-size":"18px"}},"结束日期:",-1)),Tt=g(()=>l("label",{style:{"font-size":"18px"}},"完成状态:",-1)),Nt=g(()=>l("label",{style:{"font-size":"18px"}},"搜索:",-1)),Bt=g(()=>l("hr",{class:"rounded"},null,-1)),Lt={class:"main"},zt={class:"detail"},At=g(()=>l("thead",null,[l("tr",null,[l("td",{style:{"font-size":"18px"}},"日期"),l("td",{style:{"font-size":"18px"}},"惩罚内容"),l("td",{style:{"font-size":"18px"}},"完成状况")])],-1)),Dt=g(()=>l("div",{class:"pie"},[l("svg",{id:"pieChart",width:"100%",height:"100%",viewBox:"-1 -1 2 2"})],-1)),Mt=g(()=>l("div",{class:"time"},[l("svg",{id:"barChart",height:"90%"})],-1)),Et=g(()=>l("hr",{class:"rounded"},null,-1)),Ot=g(()=>l("br",null,null,-1)),Pt={style:{overflow:"auto"}},It=g(()=>l("br",null,null,-1)),Ht=q({__name:"HelloWorld",props:{filterBegTs:{default:0},filterBegTsModifiers:{},filterEndTs:{default:Date.now()},filterEndTsModifiers:{},filterFinish:{default:-1},filterFinishModifiers:{},filterSearch:{default:""},filterSearchModifiers:{}},emits:["update:filterBegTs","update:filterEndTs","update:filterFinish","update:filterSearch"],setup(p){lt.register(at,st,ot,nt,it,dt,ut,ct,ft,pt);var c=B(p,"filterBegTs",{set(e){return C(e,f.value,m.value,s.value),e}}),f=B(p,"filterEndTs",{set(e){return C(c.value,e,m.value,s.value),e}}),m=B(p,"filterFinish",{set(e){return C(c.value,f.value,e,s.value),e}}),s=B(p,"filterSearch",{set(e){return C(c.value,f.value,m.value,e),e}}),h=[{label:"",value:-1},{label:"未開始",value:0},{label:"已完成",value:1},{label:"勉強過",value:2},{label:"進行中",value:3}];const F="data.csv?random="+Math.floor(Math.random()*1e6).toString();var k=[],T=Y([]);yt(F,function(e){k.push(e),C(c.value,f.value,m.value,s.value)});function C(e,i,r,_){T.value=k.filter(v=>v.date>=new Date(e).toISOString().slice(0,10)&&v.date<=new Date(i).toISOString().slice(0,10)).filter(v=>r==-1||r==v.done).filter(v=>_==""||v.name.toLowerCase().includes(_.toLowerCase())).sort((v,b)=>v.date.localeCompare(b.date)),Q(T.value),j(T.value)}function G(e){return e==0?"未开始":e==1?"已完成":e==2?"勉强过":e==3?"进行中":"undefined"}function x(e){return e==0?"#922B21":e==1?"#196F3D":e==2?"#9D9D9D":e==3?"#4DFFFF":"#000000"}function M(e){return e==0||e==1?"#FFFFFF":"#000000"}function J(e){return e.length>32?e.substring(0,30)+"...":e}function Q(e){const i=e.filter(o=>o.done==0).length,r=e.filter(o=>o.done==1).length,_=e.filter(o=>o.done==2).length,v=e.filter(o=>o.done==3).length,b=xt(),y=bt().innerRadius(0).outerRadius(.9),w=b([i,r,_,v]);A("#pieChart").selectAll("*").remove();const N=A("#pieChart");N.selectAll("arc").data(w).enter().append("g").append("path").attr("fill",(o,S)=>x(S)).attr("d",y),N.selectAll("label").data(w.filter(o=>o.data!=0)).enter().append("g").attr("transform",o=>"translate("+y.centroid(o)+")").append("text").text(o=>o.data.toString()).style("text-anchor","middle").style("font-size",.1)}function j(e){var i=Array.from(Map.groupBy(e,t=>t.date),([t,d])=>[t,d]).map(function(t){return{date:t[0],s0:t[1].filter(d=>d.done==0).length,s1:t[1].filter(d=>d.done==1).length,s2:t[1].filter(d=>d.done==2).length,s3:t[1].filter(d=>d.done==3).length}});let r=40,_=10,v=27,b=200,y=b-50,w=r*i.length,N=w/b*v,o=Math.max(...i.map(t=>t.s0+t.s1+t.s2+t.s3))/y;A("#barChart").selectAll("*").remove();const S=A("#barChart").attr("width",N+"vh").attr("viewBox","0 0 "+w+" "+b);S.selectAll("s0").data(i).enter().append("rect").attr("x",(t,d)=>d*r).attr("y",t=>y-t.s0/o).attr("width",r-_).attr("height",t=>t.s0/o).attr("fill",x(0)),S.selectAll("s1").data(i).enter().append("rect").attr("x",(t,d)=>d*r).attr("y",t=>y-(t.s0+t.s1)/o).attr("width",r-_).attr("height",t=>t.s1/o).attr("fill",x(1)),S.selectAll("s2").data(i).enter().append("rect").attr("x",(t,d)=>d*r).attr("y",t=>y-(t.s0+t.s1+t.s2)/o).attr("width",r-_).attr("height",t=>t.s2/o).attr("fill",x(2)),S.selectAll("s3").data(i).enter().append("rect").attr("x",(t,d)=>d*r).attr("y",t=>y-(t.s0+t.s1+t.s2+t.s3)/o).attr("width",r-_).attr("height",t=>t.s3/o).attr("fill",x(3));const X=mt().domain(i.map(t=>t.date)).range([0,w]).padding(.1);S.append("g").attr("transform","translate(0,"+y+")").call(St(X)).selectAll("text").style("text-anchor","end").attr("transform","rotate(-45)")}return(e,i)=>(D(),E(V,null,[l("div",wt,[l("div",null,[Ft,n(a(K),{type:"date",value:a(c),"onUpdate:value":i[0]||(i[0]=r=>L(c)?c.value=r:c=r)},null,8,["value"])]),l("div",null,[Ct,n(a(K),{type:"date",value:a(f),"onUpdate:value":i[1]||(i[1]=r=>L(f)?f.value=r:f=r)},null,8,["value"])]),l("div",null,[Tt,n(a(I),{vertical:""},{default:u(()=>[n(a(ht),{value:a(m),"onUpdate:value":i[2]||(i[2]=r=>L(m)?m.value=r:m=r),options:a(h),"consistent-menu-width":!1},null,8,["value","options"])]),_:1})]),l("div",null,[Nt,n(a(I),{vertical:""},{default:u(()=>[n(a(vt),{round:"",placeholder:"輸入懲罰內容來搜尋",value:a(s),"onUpdate:value":i[3]||(i[3]=r=>L(s)?s.value=r:s=r),type:"text"},null,8,["value"])]),_:1})])]),Bt,l("div",Lt,[l("div",zt,[n(a(gt),{bordered:!0,size:"small",style:{"text-align":"center"}},{default:u(()=>[At,l("tbody",null,[(D(!0),E(V,null,Z(a(T),r=>(D(),E("tr",null,[l("td",{style:O({"background-color":x(r.done),color:M(r.done)})},P(r.date),5),l("td",{style:O({"background-color":x(r.done),color:M(r.done)})},P(J(r.name)),5),l("td",{style:O({"background-color":x(r.done),color:M(r.done)})},P(G(r.done)),5)]))),256))])]),_:1})]),Dt]),Mt,Et,n(a(I),null,{default:u(()=>[Ot]),_:1}),n(a(_t),{"arrow-placement":"right",style:{"--n-title-font-size":"24px","--n-title-text-color":"rgb(11,118,225)"}},{default:u(()=>[n(a(H),{title:"懲罰語法",name:"punish_syntax"},{default:u(()=>[l("div",Pt,[n(a(U),{bordered:""},{default:u(()=>[n(a(R),null,{default:u(()=>[n(a(W),{style:{"text-align":"left","font-size":"18px"}},{default:u(()=>[z(" <日期>: Unix Timestamp"),It,z(" <編號>: int <懲罰主文>: string 〔詳細資料〕: additionalMetaData（執行狀態）: statusMetaData ")]),_:1})]),_:1})]),_:1})])]),_:1}),n(a(H),{title:"詳細資料",name:"more_information"},{default:u(()=>[l("div",null,[n(a(U),{bordered:""},{default:u(()=>[n(a(R),null,{default:u(()=>[n(a(W),{style:{"font-size":"18px"}},{default:u(()=>[z(" 🆙增加、🔁重抽、2️⃣備案、📝原主人修改n次、➕其他後來增加的條件 ")]),_:1})]),_:1})]),_:1})])]),_:1}),n(a(H),{title:"完成狀態",name:"punish_status"},{default:u(()=>[l("div",null,[n(a(U),{bordered:""},{default:u(()=>[n(a(R),null,{default:u(()=>[n(a(W),{style:{"font-size":"18px"}},{default:u(()=>[z(" ✅完成、✅已抽、🏁原主人或投票給過、⏲️ ⚔️目前已完成進度 ")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})],64))}}),Ut=(p,c)=>{const f=p.__vccOpts||p;for(const[m,s]of c)f[m]=s;return f},Rt=Ut(Ht,[["__scopeId","data-v-f3bdd3d1"]]),Wt=q({__name:"App",setup(p){return(c,f)=>(D(),et(Rt))}});rt(Wt).mount("#app");
