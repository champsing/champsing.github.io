import{P as on}from"./d3-path-CimkQT29.js";function T(e){return function(){return e}}const an=Math.abs,x=Math.atan2,z=Math.cos,ln=Math.max,tn=Math.min,V=Math.sin,F=Math.sqrt,j=1e-12,G=Math.PI,X=G/2,W=2*G;function fn(e){return e>1?0:e<-1?G:Math.acos(e)}function sn(e){return e>=1?X:e<=-1?-X:Math.asin(e)}function cn(e){let o=3;return e.digits=function(h){if(!arguments.length)return o;if(h==null)o=null;else{const m=Math.floor(h);if(!(m>=0))throw new RangeError(`invalid digits: ${h}`);o=m}return e},()=>new on(o)}function gn(e){return e.innerRadius}function yn(e){return e.outerRadius}function hn(e){return e.startAngle}function pn(e){return e.endAngle}function mn(e){return e&&e.padAngle}function dn(e,o,h,m,A,v,f,n){var c=h-e,i=m-o,t=f-A,M=n-v,u=M*c-t*i;if(!(u*u<j))return u=(t*(o-v)-M*(e-A))/u,[e+u*c,o+u*i]}function U(e,o,h,m,A,v,f){var n=e-h,c=o-m,i=(f?v:-v)/F(n*n+c*c),t=i*c,M=-i*n,u=e+t,a=o+M,g=h+t,y=m+M,I=(u+g)/2,l=(a+y)/2,R=g-u,d=y-a,p=R*R+d*d,w=A-v,P=u*y-g*a,O=(d<0?-1:1)*F(ln(0,w*w*p-P*P)),S=(P*d-R*O)/p,$=(-P*R-d*O)/p,N=(P*d+R*O)/p,q=(-P*R+d*O)/p,E=S-I,r=$-l,s=N-I,k=q-l;return E*E+r*r>s*s+k*k&&(S=N,$=q),{cx:S,cy:$,x01:-t,y01:-M,x11:S*(A/w-1),y11:$*(A/w-1)}}function Rn(){var e=gn,o=yn,h=T(0),m=null,A=hn,v=pn,f=mn,n=null,c=cn(i);function i(){var t,M,u=+e.apply(this,arguments),a=+o.apply(this,arguments),g=A.apply(this,arguments)-X,y=v.apply(this,arguments)-X,I=an(y-g),l=y>g;if(n||(n=t=c()),a<u&&(M=a,a=u,u=M),!(a>j))n.moveTo(0,0);else if(I>W-j)n.moveTo(a*z(g),a*V(g)),n.arc(0,0,a,g,y,!l),u>j&&(n.moveTo(u*z(y),u*V(y)),n.arc(0,0,u,y,g,l));else{var R=g,d=y,p=g,w=y,P=I,O=I,S=f.apply(this,arguments)/2,$=S>j&&(m?+m.apply(this,arguments):F(u*u+a*a)),N=tn(an(a-u)/2,+h.apply(this,arguments)),q=N,E=N,r,s;if($>j){var k=sn($/u*V(S)),H=sn($/a*V(S));(P-=k*2)>j?(k*=l?1:-1,p+=k,w-=k):(P=0,p=w=(g+y)/2),(O-=H*2)>j?(H*=l?1:-1,R+=H,d-=H):(O=0,R=d=(g+y)/2)}var B=a*z(R),C=a*V(R),J=u*z(w),K=u*V(w);if(N>j){var L=a*z(d),Q=a*V(d),Y=u*z(p),Z=u*V(p),D;if(I<G)if(D=dn(B,C,Y,Z,L,Q,J,K)){var b=B-D[0],_=C-D[1],nn=L-D[0],en=Q-D[1],rn=1/V(fn((b*nn+_*en)/(F(b*b+_*_)*F(nn*nn+en*en)))/2),un=F(D[0]*D[0]+D[1]*D[1]);q=tn(N,(u-un)/(rn-1)),E=tn(N,(a-un)/(rn+1))}else q=E=0}O>j?E>j?(r=U(Y,Z,B,C,a,E,l),s=U(L,Q,J,K,a,E,l),n.moveTo(r.cx+r.x01,r.cy+r.y01),E<N?n.arc(r.cx,r.cy,E,x(r.y01,r.x01),x(s.y01,s.x01),!l):(n.arc(r.cx,r.cy,E,x(r.y01,r.x01),x(r.y11,r.x11),!l),n.arc(0,0,a,x(r.cy+r.y11,r.cx+r.x11),x(s.cy+s.y11,s.cx+s.x11),!l),n.arc(s.cx,s.cy,E,x(s.y11,s.x11),x(s.y01,s.x01),!l))):(n.moveTo(B,C),n.arc(0,0,a,R,d,!l)):n.moveTo(B,C),!(u>j)||!(P>j)?n.lineTo(J,K):q>j?(r=U(J,K,L,Q,u,-q,l),s=U(B,C,Y,Z,u,-q,l),n.lineTo(r.cx+r.x01,r.cy+r.y01),q<N?n.arc(r.cx,r.cy,q,x(r.y01,r.x01),x(s.y01,s.x01),!l):(n.arc(r.cx,r.cy,q,x(r.y01,r.x01),x(r.y11,r.x11),!l),n.arc(0,0,u,x(r.cy+r.y11,r.cx+r.x11),x(s.cy+s.y11,s.cx+s.x11),l),n.arc(s.cx,s.cy,q,x(s.y11,s.x11),x(s.y01,s.x01),!l))):n.arc(0,0,u,w,p,l)}if(n.closePath(),t)return n=null,t+""||null}return i.centroid=function(){var t=(+e.apply(this,arguments)+ +o.apply(this,arguments))/2,M=(+A.apply(this,arguments)+ +v.apply(this,arguments))/2-G/2;return[z(M)*t,V(M)*t]},i.innerRadius=function(t){return arguments.length?(e=typeof t=="function"?t:T(+t),i):e},i.outerRadius=function(t){return arguments.length?(o=typeof t=="function"?t:T(+t),i):o},i.cornerRadius=function(t){return arguments.length?(h=typeof t=="function"?t:T(+t),i):h},i.padRadius=function(t){return arguments.length?(m=t==null?null:typeof t=="function"?t:T(+t),i):m},i.startAngle=function(t){return arguments.length?(A=typeof t=="function"?t:T(+t),i):A},i.endAngle=function(t){return arguments.length?(v=typeof t=="function"?t:T(+t),i):v},i.padAngle=function(t){return arguments.length?(f=typeof t=="function"?t:T(+t),i):f},i.context=function(t){return arguments.length?(n=t??null,i):n},i}function xn(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function An(e,o){return o<e?-1:o>e?1:o>=e?0:NaN}function vn(e){return e}function Tn(){var e=vn,o=An,h=null,m=T(0),A=T(W),v=T(0);function f(n){var c,i=(n=xn(n)).length,t,M,u=0,a=new Array(i),g=new Array(i),y=+m.apply(this,arguments),I=Math.min(W,Math.max(-W,A.apply(this,arguments)-y)),l,R=Math.min(Math.abs(I)/i,v.apply(this,arguments)),d=R*(I<0?-1:1),p;for(c=0;c<i;++c)(p=g[a[c]=c]=+e(n[c],c,n))>0&&(u+=p);for(o!=null?a.sort(function(w,P){return o(g[w],g[P])}):h!=null&&a.sort(function(w,P){return h(n[w],n[P])}),c=0,M=u?(I-i*d)/u:0;c<i;++c,y=l)t=a[c],p=g[t],l=y+(p>0?p*M:0)+d,g[t]={data:n[t],index:c,value:p,startAngle:y,endAngle:l,padAngle:R};return g}return f.value=function(n){return arguments.length?(e=typeof n=="function"?n:T(+n),f):e},f.sortValues=function(n){return arguments.length?(o=n,h=null,f):o},f.sort=function(n){return arguments.length?(h=n,o=null,f):h},f.startAngle=function(n){return arguments.length?(m=typeof n=="function"?n:T(+n),f):m},f.endAngle=function(n){return arguments.length?(A=typeof n=="function"?n:T(+n),f):A},f.padAngle=function(n){return arguments.length?(v=typeof n=="function"?n:T(+n),f):v},f}export{Rn as a,Tn as p};
